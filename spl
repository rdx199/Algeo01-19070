package com.belajar;


import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        int jumlahSPL = insertJumlahSPL();
        int jumlahVar = insertJumlahVar();

        double[][] matriks = new double[jumlahSPL][jumlahVar + 1];

        bacaValue(matriks, jumlahSPL, jumlahVar);
        printMatriks(matriks, jumlahSPL, jumlahVar);
//        eselonmatriks(matriks, jumlahSPL, jumlahVar);
//        System.out.println("");
//        printMatriks(matriks, jumlahSPL, jumlahVar);
        crammer(matriks,jumlahSPL,jumlahVar);

    }

    public static int insertJumlahSPL() {
        Scanner scanner = new Scanner(System.in);

        System.out.print("Masukkan jumlah baris (m): ");
        return scanner.nextInt();
    }

    public static int insertJumlahVar() {
        Scanner scanner = new Scanner(System.in);

        System.out.print("Masukkan jumlah kolom (n): ");
        return scanner.nextInt();
    }

    public static void bacaValue(double[][] matriks, int jumlahSPL, int jumlahVar) {
        Scanner scanner = new Scanner(System.in);

        for (int i = 0; i < jumlahSPL; i++) {
            for (int j = 0; j < jumlahVar; j++) {
                System.out.print("Masukkan matriks" + "[" + (i + 1) + "]" + "[" + (j + 1) + "] : ");
                matriks[i][j] = scanner.nextDouble();
            }

            System.out.print("Masukkan solusi SPL-" + (i + 1) + " : ");
            matriks[i][jumlahVar] = scanner.nextDouble();
        }
    }

    public static void printMatriks(double[][] matriks, int jumlahSPL, int jumlahVar) {
        for (int i = 0; i < jumlahSPL; i++) {
            for (int j = 0; j < jumlahVar; j++) {
                System.out.print(matriks[i][j] + " ");
            }

            System.out.print(matriks[i][jumlahVar]);
            System.out.println("");
        }
    }

    public static void eselonmatriks(double[][] matriks, int jumlahSPL, int jumlahVar) {
        int newSPL = jumlahSPL;
        int newVar = jumlahVar;
        eselon(matriks, newSPL, newVar);
    }

    public static void eselon(double[][] matriks, int newSPL, int newVar) {
        if (newSPL == 1) {
            double rasio = (1 / matriks[0][0]);
            for (int j = 0; j < newVar + 1; j++) {
                matriks[0][j] = matriks[0][j] * rasio;
            }
        } else {
            for (int i = 0; i < newSPL; i++) {
                double rasio = (1 / matriks[i][0]);
                for (int j = 0; j < newVar + 1; j++) {
                    matriks[i][j] = matriks[i][j] * rasio;
                }
            }
            for (int i = 1; i < newSPL; i++) {
                for (int j = 0; j < newVar + 1; j++) {
                    matriks[i][j] = matriks[i][j] - matriks[0][j];

                }
            }
            double[][] indikator = new double[newSPL - 1][newVar];
            for (int i = 1; i < newSPL; i++) {
                for (int j = 1; j < newVar + 1; j++) {
                    indikator[i - 1][j - 1] = matriks[i][j];
                }
            }
            eselon(indikator, newSPL - 1, newVar - 1);
            printMatriks(indikator, newSPL - 1, newVar - 1);

        }
    }

    public static void gantikolom(double[][] matriks, int jumlahSPL, int jumlahVar, int j) {
        for (int i = 0; i < jumlahSPL; i++) {
            matriks[i][j] = matriks[i][jumlahVar];
        }
    }

    public static void copy(double[][] newmatriks, double[][] oldmatriks, int jumlahSPL, int jumlahVar) {
        for (int i = 0; i < jumlahSPL; i++) {
            for (int j = 0; j < jumlahVar + 1; j++) {
                newmatriks[i][j] = oldmatriks[i][j];
            }
        }
    }

    public static void crammer(double[][] matriks, int jumlahSPL, int jumlahVar) {
        double[][] matriksganti = new double[jumlahSPL][jumlahVar + 1];
        copy(matriksganti, matriks, jumlahSPL, jumlahVar);
        if (jumlahSPL != jumlahVar) {
            System.out.println("tidak ada determinan dikarenakan matriks bukan persegi");
        } else {
            double det = Coba.ekspansiKofaktor(matriks);
            for (int j = 0; j < jumlahVar; j++) {
                gantikolom(matriksganti, jumlahSPL, jumlahVar, j);
                double detx = Coba.ekspansiKofaktor(matriksganti);
                System.out.println("x" + (j + 1) + " = " + (detx / det));
                copy(matriksganti, matriks, jumlahSPL, jumlahVar);
            }
        }
    }
}
